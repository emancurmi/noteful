(this["webpackJsonpreact-playground"]=this["webpackJsonpreact-playground"]||[]).push([[0],{26:function(e,t,n){e.exports=n(38)},31:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),l=n.n(o),c=n(9),i=(n(31),n(20)),s=n(21),u=n(3),d=n(4),m=n(6),f=n(5),h=n(1),p=r.a.createContext({folders:[],notes:[],deleteNote:function(){},addFolder:function(){},addNote:function(){}}),v=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.context.folders,t=void 0===e?[]:e,n=t.map((function(e){return e.id})),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find((function(e){return e.id===t}))}(t,n);return r.a.createElement("nav",{className:"nav"},r.a.createElement("div",{className:"folderList"},t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(c.c,{to:"/folder/".concat(e.id),className:e.id===n?" active":"not-active"},r.a.createElement("h3",null,e.folder_name)),a)}))),r.a.createElement(c.b,{id:"add-folder-link",to:"/add-folder"},"Add Folder"))}}]),n}(r.a.Component);v.contextType=p,v.defaultProps={folders:[]};var E=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.context,n=t.notes,a=void 0===n?[]:n,o=t.folders,l=void 0===o?[]:o,c=this.props.match.params.noteId,i=a.filter((function(e){return e.id===c})),s=l.filter((function(e){return 2===e.id}));!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];i.folder_id===s.id?s.map((function(e){return e.folder_name})):t.filter((function(e){return e.id}))}(c,l);return r.a.createElement("div",{className:"SidebarNav"},r.a.createElement("li",{id:"go-back"},r.a.createElement("button",{type:"button",id:"go-back-link",onClick:function(){return e.props.history.goBack()}},"Go back")))}}]),n}(r.a.Component);E.defaultProps={history:{goBack:function(){}},match:{params:{}}},E.contextType=p,E.defaultProps={notes:[],folders:[],name:""};var b="https://tnkful-noteful.herokuapp.com/api",y="https://tnkful-noteful.herokuapp.com/api/notes",N="https://tnkful-noteful.herokuapp.com/api/folders",j=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleDeleteNote=function(t){var n=e.props.id;fetch("".concat(y,"/").concat(n),{method:"DELETE"}).then((function(e){if(!e.ok)throw new Error(e.statusText)})).then((function(){e.context.deleteNote(n)})).catch((function(e){console.error({error:e})}))},e}return Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"note"},r.a.createElement("div",{key:this.props.id},r.a.createElement(c.b,{to:"/note/".concat(this.props.id)},r.a.createElement("h3",null,this.props.name),r.a.createElement("p",null,"Modified on ",this.props.modified.slice(0,10)),r.a.createElement("p",null,this.props.content)),r.a.createElement("button",{type:"button",id:"delete-note-link-little",onClick:this.handleDeleteNote},"Delete Note")))}}]),n}(r.a.Component);j.defaultProps={handleDeleteNote:function(){},onDeleteNote:function(){},match:{params:{}}},j.contextType=p,j.defaultProps={notes:[],content:"",name:""};var g=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.match.params.folderId,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e.filter((function(e){return e.folder_id===t})):e}(this.context.notes,e);return r.a.createElement("div",{className:"mainpage__main"},r.a.createElement("ul",{className:"noteList"},t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(j,{id:e.id,name:e.note_name,modified:e.date_published}))}))),r.a.createElement(c.b,{id:"add-note-link",to:"/add-note"},"Add note"))}}]),n}(r.a.Component);g.defaultProps={match:{params:{}}},g.contextType=p;var k=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleDeleteNote=function(t){var n=e.props.match.params;e.props.history.push("/");var a=Object.values(n).toString(),r=Number(a);fetch("".concat(b,"/notes/").concat(r),{method:"DELETE"}).then((function(e){if(!e.ok)throw new Error(e.statusText)})).then((function(){e.context.deleteNote(r)})).catch((function(e){console.error({error:e})}))},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.context.notes,n=void 0===t?[]:t,a=this.props.match.params.noteId,o=n.filter((function(e){return e.id===a})).map((function(e){return r.a.createElement("section",{className:"notes-display",key:e.id},r.a.createElement("h3",null,e.note_name),"Modified on ",e.date_published.slice(0,10),e.content.split("/\n \r|\n/").map((function(e,t){return r.a.createElement("p",{key:t},e)})))}));return r.a.createElement("div",{className:"whole-notes-display"},o,r.a.createElement("button",{type:"button",id:"delete-note-link-little",onClick:function(){return e.handleDeleteNote(e.props.id,e.context.deleteNote)}},"Delete Note"))}}]),n}(r.a.Component);k.contextType=p;var O=n(12),S=n(16);function C(e){return e.message?r.a.createElement("div",{className:"error"},e.message):r.a.createElement(r.a.Fragment,null)}var x=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={appError:null,formValid:!1,errorCount:null,name:"",errors:{name:"You must enter a note title"}},e.updateErrorCount=function(){var t=e.state.errors,n=0;Object.values(t).forEach((function(e){e.length>0&&n++})),e.setState({errorCount:n});var a=0===n;e.setState({formValid:a})},e.validateEntry=function(t,n){if("name"===t){if(0===n.trim().length)return"Folder name is required.";if(t.length<3)return"Name must be at least 3 characters long"}var a=Object(S.a)({},e.state).errors;a[t]="",e.setState({errors:a})},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(O.a)({},a,r.trim())),e.validateEntry(a,r),e.updateErrorCount()},e.handleSubmit=function(t){if(t.preventDefault(),!(e.state.errorCount>0)){var n=t.target.name,a={folder_name:n.value};fetch(N,{method:"POST",body:JSON.stringify(a),headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw e}))})).then((function(t){n.value="",e.context.addFolder(t),e.props.history.push("/")})).catch((function(t){e.setState({appError:t})}))}},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.state.errors;return r.a.createElement("form",{className:"addFolderForm",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("legend",null,r.a.createElement("h3",null,"Add Folder")),r.a.createElement("label",{htmlFor:"name"},r.a.createElement("h4",null,"Folder Name")),r.a.createElement("input",{type:"text",name:"name",id:"name",onChange:this.handleChange}),t.name.length>0&&r.a.createElement(C,{message:t.name}),r.a.createElement("button",{type:"submit",id:"submit-btn",disabled:!1===this.state.formValid},"Submit"),null!==this.state.errorCount?r.a.createElement("p",{className:"form-status"},"Form is ",this.state.formValid?"complete":"incomplete"):null)}}]),n}(r.a.Component);x.contextType=p,x.defaultProps={folders:[],content:"",name:"",error:null};var F=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={appError:null,formValid:!1,errorCount:null,name:"",folderId:"",content:"",errors:{folderId:"You must select a folder",name:"You must enter a note title",content:"You must enter a description"}},e.updateErrorCount=function(){var t=e.state.errors,n=0;Object.values(t).forEach((function(e){e.length>0&&n++})),e.setState({errorCount:n});var a=0===n;e.setState({formValid:a})},e.validateEntry=function(t,n){if("name"===t){if(0===n.length)return"Name is required.";if(t.length<3)return"Name must be at least 3 characters long"}var a=Object(S.a)({},e.state).errors;a[t]="",e.setState({errors:a})},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(O.a)({},a,r.trim())),e.validateEntry(a,r.trim()),e.updateErrorCount()},e.handleSubmit=function(t){if(t.preventDefault(),!(e.state.errorCount>0)){var n=t.target,a=n.name,r=n.folderId,o=n.content,l={note_name:a.value,folder_id:r.value,content:o.value,modified:new Date};e.setState({appError:null}),fetch(y,{method:"POST",body:JSON.stringify(l),headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw e}))})).then((function(t){a.value="",o.value="",r.value="",e.context.addNote(t),e.setState({data:t}),e.props.history.push("/",t)})).catch((function(t){e.setState({appError:t})}))}},e}return Object(d.a)(n,[{key:"updateFolderId",value:function(e){this.setState({folderId:{value:e,touched:!0}})}},{key:"render",value:function(){var e=this.state.errors,t=this.context.folders;return this.state.appError?r.a.createElement("p",{className:"error"},this.state.appError):r.a.createElement("form",{className:"add-note",onSubmit:this.handleSubmit},r.a.createElement("legend",null,r.a.createElement("h3",null,"Add Note")),r.a.createElement("label",{htmlFor:"name"},r.a.createElement("h4",null,"Note Name")),r.a.createElement("input",{type:"text",className:"add-note__name",name:"name",id:"name",defaultValue:"",onChange:this.handleChange}),e.name.length>0&&r.a.createElement(C,{message:e.name}),r.a.createElement("label",{htmlFor:"content"},r.a.createElement("h4",null,"Note Content")),r.a.createElement("input",{type:"text",className:"add-note__content",name:"content",id:"content",defaultValue:"",onChange:this.handleChange}),r.a.createElement("select",{id:"folderId",name:"folderId",value:this.state.folderId,onChange:this.handleChange},r.a.createElement("option",{value:""},"Select a folder"),t.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.folder_name)}))),r.a.createElement("button",{type:"submit",id:"submit-btn",disabled:!1===this.state.formValid},"Submit"),null!==this.state.errorCount?r.a.createElement("p",{className:"form-status"},"Form is ",this.state.formValid?"complete":"incomplete"):null)}}]),n}(a.Component);F.contextType=p;n(37);var D=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={notes:[],folders:[]},e.addFolder=function(t){e.setState({folders:[].concat(Object(s.a)(e.state.folders),[t])})},e.addNote=function(t){e.setState({notes:[].concat(Object(s.a)(e.state.notes),[t])})},e.handleDeleteNote=function(t){var n=e.state.notes.filter((function(e){return e.id!==t}));e.setState({notes:n})},e.addErrorNotes=function(t){e.setState(t)},e.setFolders=function(t){e.setState({folders:t,error:null})},e.setNotes=function(t){e.setState({notes:t,error:null})},e.getFolders=function(){fetch(N,{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).then(e.setFolders).catch((function(t){return e.setState({foldersError:t})}))},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;Promise.all([fetch("".concat(b,"/notes")),fetch("".concat(b,"/folders"))]).then((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return n.ok?a.ok?Promise.all([n.json(),a.json()]):a.json().then((function(e){return Promise.reject(e)})):n.json().then((function(e){return Promise.reject(e)}))})).then((function(t){var n=Object(i.a)(t,2),a=n[0],r=n[1];e.setState({notes:a,folders:r})})).catch((function(e){console.error({error:e})}))}},{key:"renderMain",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Notes"),["/","/folder/:folderId"].map((function(e){return r.a.createElement(h.a,{exact:!0,key:e,path:e,component:g})})),r.a.createElement(h.a,{path:"/note/:noteId",render:function(t){return r.a.createElement(k,Object.assign({},t,{onDelete:e.handleDeleteNote}))}}),r.a.createElement(h.a,{path:"/add-note",component:F}))}},{key:"renderSidebar",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Folders"),["/","/folder/:folderId"].map((function(e){return r.a.createElement(h.a,{exact:!0,key:e,path:e,component:v})})),r.a.createElement(h.a,{path:"/note/:noteId",component:E}),r.a.createElement(h.a,{path:"/add-folder",component:x}))}},{key:"render",value:function(){var e={notes:this.state.notes,folders:this.state.folders,deleteNote:this.handleDeleteNote,addFolder:this.addFolder,addNote:this.addNote,addErrorNotes:this.addErrorNotes,notesError:this.notesError};return r.a.createElement(p.Provider,{value:e},r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(c.b,{to:"/"},r.a.createElement("h1",null,"Noteful"))),r.a.createElement("main",{className:"mainpage"},r.a.createElement("div",{className:"sidebar"},this.renderSidebar()),r.a.createElement("div",{className:"main"},this.renderMain()))))}}]),n}(a.Component);l.a.render(r.a.createElement(c.a,null,r.a.createElement(D,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.d314807c.chunk.js.map